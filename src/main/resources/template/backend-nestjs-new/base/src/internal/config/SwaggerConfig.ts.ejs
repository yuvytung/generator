import { INestApplication, Logger } from "@nestjs/common";
import { DocumentBuilder, SwaggerModule } from "@nestjs/swagger";
import { config } from "./Config";

export function swaggerConfig(app: INestApplication): any {
  const swaggerEndpoint = config.get("jhipster.swagger.path");

  const options = new DocumentBuilder()
    .setTitle(config.get("jhipster.swagger.title"))
    .setDescription(config.get("jhipster.swagger.description"))
    .setVersion(config.get("jhipster.swagger.version"))
    .addBearerAuth()
    .build();
  const document = SwaggerModule.createDocument(app, options);
  SwaggerModule.setup(swaggerEndpoint, app, document);
  log.log(`Added swagger on endpoint: ${swaggerEndpoint}`);
}
